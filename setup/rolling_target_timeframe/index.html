
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../target_timeframe/">
      
      
        <link rel="next" href="../../services/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Rolling Target Timeframe Sensor(s) - Home Assistant Target Timeframes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rolling-target-timeframe-sensors" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Home Assistant Target Timeframes" class="md-header__button md-logo" aria-label="Home Assistant Target Timeframes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Home Assistant Target Timeframes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Rolling Target Timeframe Sensor(s)
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/bottlecapdave/homeassistant-targettimeframes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Home Assistant Target Timeframes" class="md-nav__button md-logo" aria-label="Home Assistant Target Timeframes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Home Assistant Target Timeframes
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bottlecapdave/homeassistant-targettimeframes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Setup
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_source/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data source
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../target_timeframe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Target Timeframe Sensor(s)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Rolling Target Timeframe Sensor(s)
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Rolling Target Timeframe Sensor(s)
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    <span class="md-ellipsis">
      Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hours" class="md-nav__link">
    <span class="md-ellipsis">
      Hours
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hours-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Hours Mode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hours Mode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exact-default" class="md-nav__link">
    <span class="md-ellipsis">
      Exact (default)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minimum" class="md-nav__link">
    <span class="md-ellipsis">
      Minimum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maximum" class="md-nav__link">
    <span class="md-ellipsis">
      Maximum
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#look-ahead-hours" class="md-nav__link">
    <span class="md-ellipsis">
      Look Ahead Hours
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation mode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Evaluation mode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#all-existing-target-timeframes-are-in-the-past" class="md-nav__link">
    <span class="md-ellipsis">
      All existing target timeframes are in the past
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#existing-target-timeframes-havent-started-or-finished" class="md-nav__link">
    <span class="md-ellipsis">
      Existing target timeframes haven't started or finished
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#always" class="md-nav__link">
    <span class="md-ellipsis">
      Always
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#offset" class="md-nav__link">
    <span class="md-ellipsis">
      Offset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#latest-period" class="md-nav__link">
    <span class="md-ellipsis">
      Latest Period
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#find-highest-value" class="md-nav__link">
    <span class="md-ellipsis">
      Find highest value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minimummaximum-values" class="md-nav__link">
    <span class="md-ellipsis">
      Minimum/Maximum Values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#weighting" class="md-nav__link">
    <span class="md-ellipsis">
      Weighting
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#services" class="md-nav__link">
    <span class="md-ellipsis">
      Services
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Services
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Events
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Repairs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Repairs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../repairs/invalid_target_timeframe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Repairs - Invalid Target Timeframe
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../blueprints/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blueprints
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sponsorship/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sponsorship
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    <span class="md-ellipsis">
      Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hours" class="md-nav__link">
    <span class="md-ellipsis">
      Hours
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hours-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Hours Mode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hours Mode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exact-default" class="md-nav__link">
    <span class="md-ellipsis">
      Exact (default)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minimum" class="md-nav__link">
    <span class="md-ellipsis">
      Minimum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maximum" class="md-nav__link">
    <span class="md-ellipsis">
      Maximum
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#look-ahead-hours" class="md-nav__link">
    <span class="md-ellipsis">
      Look Ahead Hours
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation mode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Evaluation mode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#all-existing-target-timeframes-are-in-the-past" class="md-nav__link">
    <span class="md-ellipsis">
      All existing target timeframes are in the past
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#existing-target-timeframes-havent-started-or-finished" class="md-nav__link">
    <span class="md-ellipsis">
      Existing target timeframes haven't started or finished
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#always" class="md-nav__link">
    <span class="md-ellipsis">
      Always
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#offset" class="md-nav__link">
    <span class="md-ellipsis">
      Offset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#latest-period" class="md-nav__link">
    <span class="md-ellipsis">
      Latest Period
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#find-highest-value" class="md-nav__link">
    <span class="md-ellipsis">
      Find highest value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minimummaximum-values" class="md-nav__link">
    <span class="md-ellipsis">
      Minimum/Maximum Values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#weighting" class="md-nav__link">
    <span class="md-ellipsis">
      Weighting
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#services" class="md-nav__link">
    <span class="md-ellipsis">
      Services
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="rolling-target-timeframe-sensors">Rolling Target Timeframe Sensor(s)<a class="headerlink" href="#rolling-target-timeframe-sensors" title="Permanent link">#</a></h1>
<p>After you've configured your <a href="../data_source/">data source</a>, you'll be able to configure rolling target timeframe sensors. These are configured as sub configuration options associated with your data source. Select <code>Rolling Target Timeframe</code> from the sub menu.</p>
<p>These sensors calculate the lowest continuous or intermittent values within the next available <code>x</code> hours, where <code>x</code> is configurable via the sensor, and turn on when these periods are active. If you are targeting an export meter, then the sensors will calculate the highest continuous or intermittent values within the next available <code>x</code> hours and turn on when these periods are active. If you are wanting to evaluate on a fixed basis (e.g. every 24 hours), you might be interested in the <a href="../target_timeframe/">standard target timeframe sensors</a></p>
<p>These sensors can then be used in automations to turn on/off devices that save you (and the planet) energy and money. You can go through this flow as many times as you need rolling target timeframe sensors.</p>
<p>Each sensor will be in the form <code>binary_sensor.target_timeframes_{{DATA_SOURCE_ID}}_{{TARGET_TIMEFRAME_NAME}}</code>.</p>
<h2 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">#</a></h2>
<h3 id="hours">Hours<a class="headerlink" href="#hours" title="Permanent link">#</a></h3>
<p>The hours that you require for the sensor to find. This should be in decimal format and represent 30 minute increments. For example 30 minutes would be <code>0.5</code>, 1 hour would be <code>1</code> or <code>1.0</code>, 1 hour and 30 minutes would be <code>1.5</code>, etc.</p>
<h3 id="hours-mode">Hours Mode<a class="headerlink" href="#hours-mode" title="Permanent link">#</a></h3>
<p>There are three different modes that the target timeframe sensor can be set to, which determines how the specified hours should be interpreted</p>
<h4 id="exact-default">Exact (default)<a class="headerlink" href="#exact-default" title="Permanent link">#</a></h4>
<p>The target timeframe sensor will try to find the best times for the specified hours. If less than the target hours are discovered, the sensor will not come on at all. If there are more hours than required that meet the specified requirements (e.g. below a certain value), then it will come on for the lowest available times up to the specified hours.</p>
<p>For instance if the lowest period is between <code>2023-01-01T00:30</code> and <code>2023-01-01T05:00</code> and your target timeframe is for 1 hour, then it will come on between  <code>2023-01-01T00:30</code> and <code>2023-01-01T01:30</code>. If the available times are between <code>2023-01-01T00:30</code> and <code>2023-01-01T01:00</code>, then the sensor will not come on at all.</p>
<h4 id="minimum">Minimum<a class="headerlink" href="#minimum" title="Permanent link">#</a></h4>
<p>The target timeframe sensor will try to find the best times for the specified hours. If less than the target hours are discovered, the sensor will not come on at all. If there are more hours than required that meet the specified requirements (e.g. below a certain value), then it will come on for all discovered times.</p>
<p>For instance if the lowest period is between <code>2023-01-01T00:30</code> and <code>2023-01-01T05:00</code> and your target timeframe is for 1 hour, then it will come on between  <code>2023-01-01T00:30</code> and <code>2023-01-01T05:00</code>. If the available times are between <code>2023-01-01T00:30</code> and <code>2023-01-01T01:00</code>, then the sensor will not come on at all.</p>
<h4 id="maximum">Maximum<a class="headerlink" href="#maximum" title="Permanent link">#</a></h4>
<p>The target timeframe sensor will try to find the best times for the specified hours. If less than the target hours are discovered, the sensor will come on for all times that are discovered. If there are more hours than required that meet the specified requirements (e.g. below a certain value), then it will come on for the lowest available times up to the specified hours.</p>
<p>For instance if the lowest period is between <code>2023-01-01T00:30</code> and <code>2023-01-01T05:00</code> and your target timeframe is for 1 hour, then it will come on between  <code>2023-01-01T00:30</code> and <code>2023-01-01T01:30</code>. If the available times are between <code>2023-01-01T00:30</code> and <code>2023-01-01T01:00</code>, then the sensor will come on between  <code>2023-01-01T00:30</code> and <code>2023-01-01T01:00</code>.</p>
<h3 id="look-ahead-hours">Look Ahead Hours<a class="headerlink" href="#look-ahead-hours" title="Permanent link">#</a></h3>
<p>This is the number of hours to look ahead for the best time periods. This will include the current time period. For instance, if it's <code>2023-01-01T00:15</code> and you have your look ahead hours set to <code>8</code>, then it will look for the best times between <code>2023-01-01T00:00</code> and <code>2023-01-01T08:00</code>.</p>
<h3 id="evaluation-mode">Evaluation mode<a class="headerlink" href="#evaluation-mode" title="Permanent link">#</a></h3>
<p>Because the time frame that is being evaluated could change at different frequencies depending on the source, you might want to set how/when the target times are evaluated in order to make the selected times more or less dynamic.</p>
<h4 id="all-existing-target-timeframes-are-in-the-past">All existing target timeframes are in the past<a class="headerlink" href="#all-existing-target-timeframes-are-in-the-past" title="Permanent link">#</a></h4>
<p>This is the default way of evaluating target times. This will only evaluate new target times if no target times have been calculated or all existing target times are in the past.</p>
<h4 id="existing-target-timeframes-havent-started-or-finished">Existing target timeframes haven't started or finished<a class="headerlink" href="#existing-target-timeframes-havent-started-or-finished" title="Permanent link">#</a></h4>
<p>This will only evaluate target times if no target times have been calculated or all existing target times are either in the future or all existing target times are in the past. </p>
<p>For example, lets say we have a continuous rolling target which looks ahead for <code>8</code> hours and has existing target times from <code>2023-01-02T01:00</code> to <code>2023-01-02T02:00</code>. </p>
<ul>
<li>If the current time is <code>2023-01-02T00:59</code>, then the target times will be re-evaluated and might change if the new rolling target period (i.e. <code>2023-01-02T00:30</code> to <code>2023-01-02T08:30</code>) has better times than the existing target times.</li>
<li>If the current time is <code>2023-01-02T01:00</code>, the the target times will not be re-evaluated because we've entered our current target times, even if the new rolling target period has cheaper times. </li>
<li>If the current time is <code>2023-01-02T02:01</code>, the the target times will be re-evaluated because our existing target times are in the past and will find the best times in the new rolling target period (i.e. <code>2023-01-02T02:00</code> to <code>2023-01-02T10:00</code>). </li>
</ul>
<h4 id="always">Always<a class="headerlink" href="#always" title="Permanent link">#</a></h4>
<p>This will always evaluate the best target times for the rolling target period, even if the sensor is in the middle of an existing target time period.</p>
<p>For example, lets say we have a continuous rolling target which looks ahead for <code>8</code> hours and has existing target times from <code>2023-01-02T01:00</code> to <code>2023-01-02T02:00</code>. </p>
<ul>
<li>If the current time is <code>2023-01-02T00:59</code>, then the target times will be re-evaluated and might change if the new rolling target period (i.e. <code>2023-01-02T00:30</code> to <code>2023-01-02T08:30</code>) has better times than the existing target times.</li>
<li>If the current time is <code>2023-01-02T01:31</code>, then the target times will be re-evaluated and might change if the new rolling target period (i.e. <code>2023-01-02T01:30</code> to <code>2023-01-02T09:30</code>) has better times than the existing target times.</li>
<li>If the current time is <code>2023-01-02T02:01</code>, the the target times will be re-evaluated because our existing target times are in the past and will find the best times in the new rolling target period (i.e. <code>2023-01-02T02:00</code> to <code>2023-01-02T10:00</code>). </li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This setting means that you could end up with the sensor not turning on for the fully requested hours as the target times might be moved ahead half way through the picked times. It also could mean that the sensor doesn't come on at all during the requested look ahead hours (e.g. 8) because the lowest period kept moving back. </p>
</div>
<h3 id="offset">Offset<a class="headerlink" href="#offset" title="Permanent link">#</a></h3>
<p>You may want your target timeframe sensors to turn on a period of time before the optimum discovered period. For example, you may be turning on a robot vacuum cleaner for a 30 minute clean and want it to charge during the optimum period. For this, you'd use the <code>offset</code> field and set it to <code>-00:30:00</code>, which can be both positive and negative and go up to a maximum of 24 hours. This will shift when the sensor turns on relative to the optimum period. For example, if the optimum period is between <code>2023-01-18T10:00</code> and <code>2023-01-18T11:00</code> with an offset of <code>-00:30:00</code>, the sensor will turn on between <code>2023-01-18T09:30</code> and <code>2023-01-18T10:30</code>.</p>
<h3 id="latest-period">Latest Period<a class="headerlink" href="#latest-period" title="Permanent link">#</a></h3>
<p>Depending on how you're going to use the sensor, you might want the best period at the latest possible time. For example, you might be using the sensor to turn on an immersion heater which you'll want to come on at the end of the lowest found period. </p>
<p>For instance if you turn this on and the lowest period is between <code>2023-01-01T00:30</code> and <code>2023-01-01T05:00</code> and your target timeframe is for 1 hour, then it will come on between <code>2023-01-01T04:00</code> and <code>2023-01-01T05:00</code> instead of <code>2023-01-01T00:30</code> and <code>2023-01-01T01:30</code>.</p>
<p>This feature is toggled on by the <code>Find last applicable values</code> checkbox.</p>
<h3 id="find-highest-value">Find highest value<a class="headerlink" href="#find-highest-value" title="Permanent link">#</a></h3>
<p>If this is checked, then the highest values will be discovered, instead of the normal behaviour of the lowest values.</p>
<h3 id="minimummaximum-values">Minimum/Maximum Values<a class="headerlink" href="#minimummaximum-values" title="Permanent link">#</a></h3>
<p>There may be times that you want the target timeframe sensors to not take into account values that are above or below a certain value (e.g. you don't want the sensor to turn on when values go crazy or where it would be more beneficial to export).</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>If hours mode is set to <strong>minimum</strong>, then a minimum and/or maximum rate must be specified in order for the target timeframe sensor to know what the cut off is for discovered times.</p>
</div>
<h3 id="weighting">Weighting<a class="headerlink" href="#weighting" title="Permanent link">#</a></h3>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>This is only available for <strong>continuous</strong> target timeframe sensors in <strong>exact</strong> hours mode.</p>
</div>
<p>There may be times when the device you're wanting the target timeframe sensor to turn on doesn't have a consistent power draw. You can specify a weighting which can be applied to each discovered 30 minute slot. This can be specified in a few different ways. Take the following example weighting for a required 2 hours.</p>
<ul>
<li><code>1,1,2,1</code> - This applies a weighting of 1 to the first, second and forth slot and a weighting of 2 to the third slot. This will try and make the lowest slot fall on the third slot, as long as the surrounding slots are cheaper than other continuous slots.</li>
<li><code>*,2,1</code> - This applies a weighting of 1 to the first, second and forth slot and a weighting of 2 to the third slot. The <code>*</code> can be used as a placeholder for the standard weighting of 1 for all slots before the ones specified.</li>
<li><code>1,1,2,*</code> - This applies a weighting of 1 to the first, second and forth slot and a weighting of 2 to the third slot. The <code>*</code> can be used as a placeholder for the standard weighting of 1 for all slots after the ones specified.</li>
<li><code>2,*,2</code> - This applies a weighting of 2 to the first and forth slot and a weighting of 1 to all slots in between. The <code>*</code> can be used as a placeholder for the standard weighting of 1 for all slots in between the specified slots.</li>
</ul>
<p>Each slot weighting must be a whole number or decimal number and be positive.</p>
<p>You can also use weightings to ignore slots. This can be done by assigning a value of 0 for the desired slot.</p>
<h2 id="attributes">Attributes<a class="headerlink" href="#attributes" title="Permanent link">#</a></h2>
<p>The following attributes are available on each sensor</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>string</code></td>
<td>The name of the sensor.</td>
</tr>
<tr>
<td><code>hours</code></td>
<td><code>string</code></td>
<td>The total hours are being discovered.</td>
</tr>
<tr>
<td><code>type</code></td>
<td><code>string</code></td>
<td>The type/mode for the target timeframe sensor. This will be either <code>continuous</code> or <code>intermittent</code>.</td>
</tr>
<tr>
<td><code>look_ahead_hours</code></td>
<td><code>float</code></td>
<td>The number of hours the sensor should look ahead for the best time period</td>
</tr>
<tr>
<td><code>target_times_evaluation_mode</code></td>
<td><code>string</code></td>
<td>The mode that determines when/how target times are picked</td>
</tr>
<tr>
<td><code>last_values</code></td>
<td><code>boolean</code></td>
<td>Determines if <code>Find last applicable values</code> is turned off for the sensor.</td>
</tr>
<tr>
<td><code>offset</code></td>
<td><code>string</code></td>
<td>The offset configured for the sensor.</td>
</tr>
<tr>
<td><code>values_incomplete</code></td>
<td><code>boolean</code></td>
<td>True if rate information is incomplete and therefore target times cannot be calculated; False otherwise.</td>
</tr>
<tr>
<td><code>target_times</code></td>
<td><code>array</code></td>
<td>The discovered times and values the sensor will come on for.</td>
</tr>
<tr>
<td><code>overall_average_value</code></td>
<td><code>float</code></td>
<td>The average value of all discovered times during the current <strong>24 hour period</strong>.</td>
</tr>
<tr>
<td><code>overall_min_value</code></td>
<td><code>float</code></td>
<td>The minimum value of all discovered times during the current <strong>24 hour period</strong>.</td>
</tr>
<tr>
<td><code>overall_max_value</code></td>
<td><code>float</code></td>
<td>The maximum value of all discovered times during the current <strong>24 hour period</strong>.</td>
</tr>
<tr>
<td><code>current_duration_in_hours</code></td>
<td><code>float</code></td>
<td>The duration the sensor will be on for, for the current continuous discovered period. For <code>continuous</code> sensors, this will be the entire period. For <code>intermittent</code> sensors, this could be the entire period or a portion of it, depending on the discovered times. This could be <code>none</code>/<code>unknown</code> if the sensor is not currently in a discovered period.</td>
</tr>
<tr>
<td><code>current_average_value</code></td>
<td><code>float</code></td>
<td>The average value for the current continuous discovered period. This could be <code>none</code>/<code>unknown</code> if the sensor is not currently in a discovered period.</td>
</tr>
<tr>
<td><code>current_min_value</code></td>
<td><code>float</code></td>
<td>The min value for the current continuous discovered period. This could be <code>none</code>/<code>unknown</code> if the sensor is not currently in a discovered period.</td>
</tr>
<tr>
<td><code>current_max_value</code></td>
<td><code>float</code></td>
<td>The max value for the current continuous discovered period. This could be <code>none</code>/<code>unknown</code> if the sensor is not currently in a discovered period.</td>
</tr>
<tr>
<td><code>next_time</code></td>
<td><code>datetime</code></td>
<td>The next date/time the sensor will come on. This will only be populated if <code>target_times</code> has been calculated and at least one period/block is in the future.</td>
</tr>
<tr>
<td><code>next_duration_in_hours</code></td>
<td><code>float</code></td>
<td>The duration the sensor will be on for, for the next continuous discovered period. For <code>continuous</code> sensors, this will be the entire period. For <code>intermittent</code> sensors, this could be the entire period or a portion of it, depending on the discovered times. This will only be populated if <code>target_times</code> has been calculated and at least one period/block is in the future.</td>
</tr>
<tr>
<td><code>next_average_value</code></td>
<td><code>float</code></td>
<td>The average value for the next continuous discovered period. For <code>continuous</code> sensors, this will be the entire period. For <code>intermittent</code> sensors, this could be the entire period or a portion of it, depending on the discovered times. This will only be populated if <code>target_times</code> has been calculated and at least one period/block is in the future.</td>
</tr>
<tr>
<td><code>next_min_value</code></td>
<td><code>float</code></td>
<td>The average value for the next continuous discovered period. This will only be populated if <code>target_times</code> has been calculated and at least one period/block is in the future.</td>
</tr>
<tr>
<td><code>next_max_value</code></td>
<td><code>float</code></td>
<td>The average value for the next continuous discovered period. This will only be populated if <code>target_times</code> has been calculated and at least one period/block is in the future.</td>
</tr>
<tr>
<td><code>target_times_last_evaluated</code></td>
<td>datetime</td>
<td>The datetime the target times collection was last evaluated. This will occur if all previous target times are in the past and all values are available for the requested future time period. For example, if you are targeting 16:00 (day 1) to 16:00 (day 2), and you only have values up to 23:00 (day 1), then the target timeframes won't be calculated.</td>
</tr>
</tbody>
</table>
<h2 id="services">Services<a class="headerlink" href="#services" title="Permanent link">#</a></h2>
<p>There are services available associated with target timeframe sensors. Please review them in the <a href="../../services/#rolling-target-timeframes">services doc</a>.</p>








  <aside class="md-source-file">
    
    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Contributors">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg>
      
    </span>
    <nav>
      David Kendall
    </nav>
  </span>

    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "search.suggest", "search.highlight", "toc.follow"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>